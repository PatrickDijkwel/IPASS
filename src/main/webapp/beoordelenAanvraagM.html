<!DOCTYPE html>
<html>
	<head>
		<title>index pagina</title>
		<link rel="stylesheet" type="text/css" href="CSS/mainCSS.css">
	</head>
	<body>
		<div class="container">
			<div class="HCIJLOGO"><h1>H.C.IJ.</h1></div>
			<div class="PAGETITLE"><h1>Aanvraag beoordelen</h1></div>
			<div class="clear"></div>
		</div>
		<div class="container">
			<div class="MENU">
				<a id="loguit" style="text-decoration:underline;">Uitloggen</a><br>
				<a id="overzichtAanvragen" style="text-decoration:underline;">Overzicht Aanvragen</a><br>
			</div>
			<div class="PAGECONTENT">
				<label name="teamnaam"></label><br>
				<label name="tegenstander"></label><br>
				<label name="datum"></label><br>
				<label name="trainernaam"></label><br>
				<label name="tijdstip"></label><br>
				<label name="veldnummer"></label><br>
				
				<label name="aanvraagtype"></label><br>				
				
				<div id="response"></div>
				
				<form class="beoordelingForm">
					<input type="text" name="status"/>
				</form>
			
				<button type="button" id="goedkeuren">Goedkeuren</button><br>
				<button type="button" id="afkeuren">Afkeuren</button>
				<form id="objectAanmaak">
					<input type="text" name="teamnaam">
					<input type="text" name="tegenstander">
					<input type="text" name="datum">
					<input type="text" name="tijdstip">
					<input type="text" name="veldnummer">
				</form>
			</div>
			<div class="clear"></div>
		</div>
		
		<script src="https://code.jquery.com/jquery-3.2.0.min.js"></script>
		<script>
		if (window.sessionStorage.getItem("tegenstander") == null) {
			$('label[name="tegenstander"]').hide();
		}
		$(".beoordelingForm").hide();
		$("#objectAanmaak").hide();
		<!-- Click events voor alle menuopties -->
		$('#loguit').click(function(e) {
			window.sessionStorage.clear();
			window.location.replace("login.html");
		});
		$('#overzichtAanvragen').click(function(e) {
			window.location = "overzichtAanvragenM.html";
		});
		$(".PAGETITLE").click(function(e) {
			window.location = "overzichtAanvragenM.html";
		});
		<!-- ------------------------------------------- -->
		
		<!-- Plaatsen van Informatie over geselcteerde Aanvraag -->
		$('label[name="teamnaam"]').append("Team: " + window.sessionStorage.getItem("teamnaam"));
		$('label[name="tegenstander"]').append("Tegenstander: " + window.sessionStorage.getItem("tegenstander"));
		$('label[name="datum"]').append("Datum: " + window.sessionStorage.getItem("datum"));
		$('label[name="trainernaam"]').append("Trainer: " + window.sessionStorage.getItem("trainernaam"));
		$('label[name="tijdstip"]').append("Tijdstip: " + window.sessionStorage.getItem("tijdstip"));
		$('label[name="veldnummer"]').append("Veld: " + window.sessionStorage.getItem("veldnummer"));
		$('label[name="aanvraagtype"]').append("Aanvraagtype: " + window.sessionStorage.getItem("aanvraagtype"));
		
		$('input[name="teamnaam"]').val(window.sessionStorage.getItem("teamnaam"));
		$('input[name="tegenstander"]').val(window.sessionStorage.getItem("tegenstander"));
		$('input[name="datum"]').val(window.sessionStorage.getItem("datum"));
		$('input[name="tijdstip"]').val(window.sessionStorage.getItem("tijdstip"));
		$('input[name="veldnummer"]').val(window.sessionStorage.getItem("veldnummer"));
		<!-- ------------------------------------------- -->
		
		<!-- Click events voor goedkeuren/afkeuren -->
		$("#goedkeuren").click(function(e) {

			$("#response").text("Aanvraag is goedgekeurd!");
			var uri = "restservices/aanvragen/" + window.sessionStorage.getItem("aanvraagnummer");
			$(".beoordelingForm").find('input[name="status"]').val("goedgekeurd");
			$.ajax(uri, {
				type: "PUT",
				data: $(".beoordelingForm").serialize(),
				success: function() {
					console.log("Wijziging status succes!");
					<!-- Plaats hier POST methode voor Training of voor Wedstrijd -->
					if (window.sessionStorage.getItem("aanvraagtype") == "Oefenwedstrijd") {
						console.log($("#objectAanmaak").serialize());
						$.ajax({
							url: "restservices/wedstrijden",
							method: "POST",
							data: $("#objectAanmaak").serialize()
						});
						console.log("Wedstrijd object aagemaakt!")
					}
					if (window.sessionStorage.getItem("aanvraagtype") == "Training") {
						console.log("training");
					}
				}
			});
		});
		
		$("#afkeuren").click(function(e) {
			$("#response").text("Aanvraag is afgekeurd!");
			var uri = "restservices/aanvragen/" + window.sessionStorage.getItem("aanvraagnummer");
			$(".beoordelingForm").find('input[name="status"]').val("afkeuren");
			$.ajax(uri, {
				type: "PUT",
				data: $(".beoordelingForm").serialize(),
				success: function() {
					console.log("Wijziging succes!");
				}
			});
		});
		<!-- ------------------------------------------- -->
		</script>
	</body>
</html>